@using HtmlGenerationWebSite.Models
@model IEnumerable<Product>

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<html>
<head>
    <meta charset="utf-8" />
</head>
<body>
    <form asp-action="Index" asp-controller="HtmlGeneration_Product" asp-antiforgery="true">
    @{
        var index = 0;
        var fieldPrefix = ViewData.TemplateInfo.HtmlFieldPrefix;
        foreach (var product in Model)
        {
            @* Update HtmlFieldPrefix so generated for, id and name attribute values are correct. *@
            ViewData.TemplateInfo.HtmlFieldPrefix = fieldPrefix + string.Format("[{0}]", index++);
            <div>
                <label asp-for="@product.HomePage" class="product"></label>
                <input asp-for="@product.HomePage" type="url" size="50" disabled="disabled" readonly="readonly" />
            </div>
            <partial name="_ProductPartial" model="@product" />
            ViewData.TemplateInfo.HtmlFieldPrefix = fieldPrefix;
        }
        <input type="submit" />
    }
    </form>
</body>
</html>
